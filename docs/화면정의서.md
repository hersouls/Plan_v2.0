📋 Moonwave Plan v2.0 화면정의서 

## 📋 목차
1. [프로젝트 개요](#📖-프로젝트-개요)
2. [데이터 구조](#📊-데이터-구조)
3. [화면 구조도](#🏗️-화면-구조도)
4. [화면별 상세 정의](#🎯-화면별-상세-정의)
   - 4.1. [메인 화면 (Home)](#1-메인-화면-home)
   - 4.2. [할일 생성 화면 (TaskCreate)](#2-할일-생성-화면-taskcreate)
   - 4.3. [할일 상세 화면 (TaskDetail)](#3-할일-상세-화면-taskdetail)
   - 4.4. [가족 관리 화면 (FamilyManage)](#4-가족-관리-화면-familymanage)
   - 4.5. [통계 화면 (Statistics)](#5-통계-화면-statistics)
   - 4.6. [설정 화면 (Settings)](#6-설정-화면-settings)
5. [공통 컴포넌트](#🧩-공통-컴포넌트)
6. [상태 관리](#🔄-상태-관리)
7. [반응형 디자인](#📱-반응형-디자인)
8. [성능 최적화](#⚡-성능-최적화)
9. [접근성](#♿-접근성)
10. [PWA 설정](#📱-pwa-설정)

---

## 📖 프로젝트 개요

### 프로젝트 정보
- **프로젝트명**: Moonwave Plan (To-Do List)
- **도메인**: https://plan.moonwave.kr
- **기술 스택**: React 19 + Vite + Tailwind CSS + Radix UI + Firebase
- **배포**: Vercel
- **서비스 타입**: 정적 SPA + PWA

### 핵심 컨셉
> "가족과 함께하는 스마트한 할일 관리" - 가족 구성원 모두가 함께 참여하고 소통하는 협업형 할일 관리 서비스

### 주요 기능
- ✅ 할일 관리 (생성/수정/삭제/완료)
- 👨‍👩‍👧‍👦 가족 그룹 관리 및 할일 공유
- 🔔 실시간 알림 및 리마인더
- 📊 완료율 통계 및 게임화 요소
- 🎯 카테고리별/담당자별 필터링
- 🔄 반복 할일 자동 생성
- 💬 댓글 및 이모지 반응

---

## 📊 데이터 구조

### Firestore 컬렉션 구조
```
groups/
  └── {groupId}/
      ├── info (그룹 기본 정보)
      └── members/ (구성원 서브컬렉션)
          └── {memberId}

tasks/
  └── {taskId}/
      ├── info (할일 정보)
      └── comments/ (댓글 서브컬렉션)
          └── {commentId}

users/
  └── {userId}/
      ├── profile
      └── settings
```

### 핵심 데이터 모델
```typescript
interface Task {
  id: string;
  groupId: string;           // 가족 그룹 ID
  userId: string;            // 작성자 ID
  assigneeId: string;        // 담당자 ID
  title: string;
  description?: string;
  status: 'pending' | 'in_progress' | 'completed';
  priority: 'low' | 'medium' | 'high';
  category: 'household' | 'work' | 'personal' | 'shopping' | 'other';
  dueDate?: string;          // ISO 8601 format
  recurring?: {
    enabled: boolean;
    frequency: 'daily' | 'weekly' | 'monthly';
    days?: string[];         // ['monday', 'thursday']
  };
  tags: string[];
  completedAt?: Timestamp;
  completedBy?: string;
  reminders: Reminder[];
  createdAt: Timestamp;
  updatedAt: Timestamp;
}

interface FamilyGroup {
  id: string;
  name: string;
  ownerId: string;
  members: Member[];
  inviteCode: string;
  settings: GroupSettings;
  createdAt: Timestamp;
}

interface Member {
  userId: string;
  name: string;
  role: 'admin' | 'member';
  avatar?: string;
  joinedAt: Timestamp;
}
```

---

## 🏗️ 화면 구조도

### 화면 플로우 다이어그램
```mermaid
flowchart TB
    Home[메인 대시보드<br/>(오늘의 할일)]:::main
    TaskCreate[할일 생성]:::create
    TaskDetail[할일 상세/수정]:::detail
    FamilyManage[가족 관리]:::family
    Statistics[통계/리포트]:::stats
    Settings[설정]:::settings

    %% 연결선
    Home -->|할일 추가| TaskCreate
    Home -->|할일 클릭| TaskDetail
    Home -->|가족 관리| FamilyManage
    Home -->|통계 보기| Statistics
    Home -->|설정| Settings
    TaskDetail -->|수정| TaskCreate
    FamilyManage -->|멤버 초대| Settings

    %% 스타일
    classDef main fill:#C7DFF4,stroke:#03428E,color:#000,font-weight:bold;
    classDef create fill:#E5F9F9,stroke:#119891,color:#000;
    classDef detail fill:#DCFFFF,stroke:#2EC9D6,color:#000;
    classDef family fill:#FDF5E6,stroke:#F59E0B,color:#000;
    classDef stats fill:#FFF5F5,stroke:#EF4444,color:#000;
    classDef settings fill:#F0FFF0,stroke:#10B981,color:#000;
```

### 네비게이션 구조
```
┌─────────────────────────────────────────┐
│           메인 대시보드 (/)              │
│      (오늘의 할일 & 진행 현황)          │
└────────────────┬────────────────────────┘
         ┌───────┴──────┬─────────┐
         ▼              ▼         ▼
┌────────────┐  ┌────────────┐  ┌────────────┐
│ 할일 생성  │  │ 할일 상세  │  │가족 관리   │
│/tasks/new  │  │/tasks/{id} │  │/family     │
│            │  │            │  │            │
└────────────┘  └────────────┘  └────────────┘
                      │
         ┌────────────┼────────────┐
         ▼            ▼            ▼
┌────────────┐  ┌────────────┐  ┌────────────┐
│통계/리포트 │  │알림 센터   │  │설정        │
│/statistics │  │/notifi-    │  │/settings   │
│            │  │cations     │  │            │
└────────────┘  └────────────┘  └────────────┘
```

---

## 🎯 화면별 상세 정의

### 1. 메인 화면 (Home)

#### 화면 ID: HOME-001
#### 화면명: 메인 대시보드
#### URL: `/`
#### 목적: 오늘의 할일 확인, 진행 현황 파악, 빠른 할일 추가

#### 레이아웃
```
┌─────────────────────────────────────────┐
│  Moonwave Plan                          │ 
│  bg-background moonwave-background      │
│  moonwave-starry                        │
├─────────────────────────────────────────┤
│  ┌──────────────────────────────┐      │
│  │     📋 Moonwave Plan          │      │ Hero Section
│  │  가족과 함께하는 할일 관리     │      │ (GlassCard strong)
│  │  오늘의 할일 5개 | 완료 3개   │      │
│  │  [진행률: 60%]                │      │
│  └──────────────────────────────┘      │
│                                         │
│  ┌──────────────────────────────┐      │ Quick Add
│  │ + 할일을 빠르게 추가하세요... │      │ (GlassCard light)
│  └──────────────────────────────┘      │
│                                         │
│  오늘의 할일 (5)                        │
│  ┌──────────────────────────────┐      │ TaskCard
│  │ ⬜ 장보기                    │      │ (GlassCard default)
│  │    우유, 빵, 달걀 구매        │      │
│  │    담당: 문유 | 오후 6시까지  │      │
│  └──────────────────────────────┘      │
│  ┌──────────────────────────────┐      │
│  │ ✅ 방 청소                   │      │ Completed
│  │    담당: 보라공주 | 완료 ✓    │      │
│  └──────────────────────────────┘      │
│                                         │
│  가족 활동 요약                         │
│  ┌──────────────────────────────┐      │ FamilyActivity
│  │ 👤 문유: 3개 완료            │      │ (GlassCard light)
│  │ 👤 보라공주: 2개 진행중      │      │
│  └──────────────────────────────┘      │
│                                         │
│                              [+]        │ FAB
└─────────────────────────────────────────┘
```

#### 컴포넌트 사양

##### HeroSection
```tsx
<GlassCard variant="strong" withWaveEffect className="gradient-mixed moonwave-glow animate-fade-in">
  <div className="text-center p-8">
    <h1 className="text-4xl font-bold mb-2">📋 Moonwave Plan</h1>
    <p className="text-lg mb-6">가족과 함께하는 스마트한 할일 관리</p>
    <div className="flex justify-center gap-6">
      <Badge>오늘 할일 {todayTasksCount}개</Badge>
      <Badge variant="success">완료 {completedCount}개</Badge>
      <Progress value={completionRate} className="w-32" />
    </div>
  </div>
</GlassCard>
```

##### TaskCard
```tsx
<GlassCard variant="default" hoverable onClick={() => navigate(`/tasks/${task.id}`)}>
  <div className="flex items-start gap-3 p-4">
    <Checkbox 
      checked={task.status === 'completed'} 
      onCheckedChange={(checked) => handleToggleComplete(task.id, checked)}
    />
    <div className="flex-1">
      <h3 className="font-semibold">{task.title}</h3>
      {task.description && (
        <p className="text-sm text-muted-foreground mt-1">{task.description}</p>
      )}
      <div className="flex items-center gap-4 mt-2 text-sm">
        <span className="flex items-center gap-1">
          <Avatar className="w-4 h-4" />
          {task.assigneeName}
        </span>
        {task.dueDate && (
          <span className="flex items-center gap-1">
            <Clock className="w-4 h-4" />
            {formatDueDate(task.dueDate)}
          </span>
        )}
        <Badge variant={getPriorityVariant(task.priority)}>
          {task.priority}
        </Badge>
      </div>
    </div>
  </div>
</GlassCard>
```

---

### 2. 할일 생성 화면 (TaskCreate)

#### 화면 ID: CREATE-001
#### 화면명: 새 할일 만들기
#### URL: `/tasks/new` 또는 `/tasks/{id}/edit`
#### 목적: 새 할일 생성 또는 기존 할일 수정

#### 레이아웃
```
┌─────────────────────────────────────────┐
│  [← 뒤로]        할일 만들기            │ Header
├─────────────────────────────────────────┤
│  ┌──────────────────────────────┐      │ FormCard
│  │  할일 제목 *                  │      │ (GlassCard default)
│  │  [___________________________]│      │
│  │                               │      │
│  │  설명                         │      │
│  │  [___________________________]│      │
│  │  [___________________________]│      │
│  │                               │      │
│  │  담당자        우선순위       │      │
│  │  [선택 ▼]      [중간 ▼]       │      │
│  │                               │      │
│  │  카테고리      마감일         │      │
│  │  [가사 ▼]      [____-__-__]   │      │
│  │                               │      │
│  │  ⬜ 반복 설정                │      │
│  │  [매주 ▼] [월,수,금 선택]     │      │
│  │                               │      │
│  │  알림 설정                    │      │
│  │  [1시간 전 ▼] [추가 +]        │      │
│  │                               │      │
│  │  태그                         │      │
│  │  [#급함] [#장보기] [+ 추가]   │      │
│  └──────────────────────────────┘      │
├─────────────────────────────────────────┤
│  [취소]              [저장하기]         │ 하단 고정 액션바
└─────────────────────────────────────────┘
```

#### 입력 필드 & 검증 규칙
- **제목** (필수): 2~100자
- **설명** (선택): 최대 500자
- **담당자** (필수): 가족 구성원 선택
- **우선순위**: low/medium/high
- **카테고리**: household/work/personal/shopping/other
- **마감일**: 현재 시간 이후
- **반복 설정**: 빈도 및 요일 선택
- **알림**: 다중 알림 설정 가능
- **태그**: 최대 10개

---

### 3. 할일 상세 화면 (TaskDetail)

#### 화면 ID: DETAIL-001
#### 화면명: 할일 상세 정보
#### URL: `/tasks/{id}`
#### 목적: 할일 상세 확인, 댓글 작성, 상태 변경

#### 레이아웃
```
┌─────────────────────────────────────────┐
│  [← 뒤로]                    [수정] [삭제]│ Header
├─────────────────────────────────────────┤
│  ┌──────────────────────────────┐      │ TaskHeader
│  │  ⬜ 장보기                    │      │ (GlassCard strong)
│  │  우유, 빵, 달걀, 과일 구매     │      │
│  │                               │      │
│  │  담당: 문유                   │      │
│  │  마감: 오늘 오후 6시          │      │
│  │  우선순위: 높음               │      │
│  │  카테고리: 장보기             │      │
│  │                               │      │
│  │  [진행중으로 변경] [완료 체크] │      │
│  └──────────────────────────────┘      │
│                                         │
│  활동 기록                              │
│  ┌──────────────────────────────┐      │ ActivityLog
│  │  📝 문유님이 생성 (2시간 전)  │      │ (GlassCard light)
│  │  ✏️ 보라공주님이 수정 (1시간) │      │
│  │  💬 댓글 2개                 │      │
│  └──────────────────────────────┘      │
│                                         │
│  댓글                                   │
│  ┌──────────────────────────────┐      │ Comments
│  │  👤 보라공주                  │      │
│  │  우유는 저지방으로 사주세요!   │      │
│  │  30분 전          👍 ❤️       │      │
│  └──────────────────────────────┘      │
│  ┌──────────────────────────────┐      │
│  │  댓글을 입력하세요...         │      │
│  │                    [전송]     │      │
│  └──────────────────────────────┘      │
└─────────────────────────────────────────┘
```

---

### 4. 가족 관리 화면 (FamilyManage)

#### 화면 ID: FAMILY-001
#### 화면명: 가족 그룹 관리
#### URL: `/family`
#### 목적: 가족 구성원 관리, 초대, 권한 설정

#### 레이아웃
```
┌─────────────────────────────────────────┐
│  [← 뒤로]        가족 관리              │ Header
├─────────────────────────────────────────┤
│  ┌──────────────────────────────┐      │ GroupInfo
│  │  우리 가족                    │      │ (GlassCard default)
│  │  구성원 4명 | 코드: ABC123    │      │
│  │  [초대 링크 복사]             │      │
│  └──────────────────────────────┘      │
│                                         │
│  구성원 목록                            │
│  ┌──────────────────────────────┐      │ MemberCard
│  │  👤 문유 (관리자)             │      │
│  │  할일 24개 | 완료율 85%      │      │
│  │  [권한 변경]                 │      │
│  └──────────────────────────────┘      │
│  ┌──────────────────────────────┐      │
│  │  👤 보라공주 (멤버)           │      │
│  │  할일 18개 | 완료율 72%      │      │
│  │  [권한 변경] [내보내기]       │      │
│  └──────────────────────────────┘      │
│                                         │
│  그룹 설정                              │
│  ┌──────────────────────────────┐      │ GroupSettings
│  │  ⬜ 구성원 할일 편집 허용    │      │ (GlassCard light)
│  │  ⬜ 완료 승인 필요           │      │
│  │  ⬜ 일일 요약 알림           │      │
│  └──────────────────────────────┘      │
└─────────────────────────────────────────┘
```

---

### 5. 통계 화면 (Statistics)

#### 화면 ID: STATS-001
#### 화면명: 통계 및 리포트
#### URL: `/statistics`
#### 목적: 개인/가족 단위 완료율 통계, 성과 분석

#### 레이아웃
```
┌─────────────────────────────────────────┐
│  [← 뒤로]        통계                   │ Header
├─────────────────────────────────────────┤
│  ┌──────────────────────────────┐      │ PeriodSelector
│  │  [주간] [월간] [전체]        │      │
│  │  2025.08.04 ~ 2025.08.10    │      │
│  └──────────────────────────────┘      │
│                                         │
│  ┌──────────────────────────────┐      │ OverviewCard
│  │  📊 주간 요약                │      │ (GlassCard strong)
│  │  총 할일: 35개               │      │
│  │  완료: 28개 (80%)            │      │
│  │  진행중: 5개                 │      │
│  │  지연: 2개                   │      │
│  └──────────────────────────────┘      │
│                                         │
│  ┌──────────────────────────────┐      │ ChartCard
│  │  완료율 추이                 │      │ (GlassCard default)
│  │  [차트 영역]                 │      │
│  └──────────────────────────────┘      │
│                                         │
│  ┌──────────────────────────────┐      │ LeaderBoard
│  │  🏆 이번 주 MVP               │      │ (GlassCard light)
│  │  1. 문유 (15개 완료)         │      │
│  │  2. 보라공주 (13개 완료)     │      │
│  └──────────────────────────────┘      │
│                                         │
│  ┌──────────────────────────────┐      │ CategoryStats
│  │  카테고리별 분석             │      │
│  │  가사: 45%                   │      │
│  │  업무: 30%                   │      │
│  │  개인: 15%                   │      │
│  │  장보기: 10%                 │      │
│  └──────────────────────────────┘      │
└─────────────────────────────────────────┘
```

---

### 6. 설정 화면 (Settings)

#### 화면 ID: SETTINGS-001
#### 화면명: 설정
#### URL: `/settings`
#### 목적: 프로필 관리, 알림 설정, 테마 변경

#### 레이아웃
```
┌─────────────────────────────────────────┐
│  [← 뒤로]        설정                   │ Header
├─────────────────────────────────────────┤
│  ┌──────────────────────────────┐      │ ProfileCard
│  │  프로필                      │      │ (GlassCard default)
│  │  👤 [아바타]                 │      │
│  │  이름: [문유___]              │      │
│  │  이메일: user@example.com    │      │
│  │  [프로필 수정]               │      │
│  └──────────────────────────────┘      │
│                                         │
│  ┌──────────────────────────────┐      │ NotificationSettings
│  │  알림 설정                   │      │ (GlassCard light)
│  │  ⬜ 푸시 알림                │      │
│  │  ⬜ 이메일 알림              │      │
│  │  ⬜ 일일 요약 (오전 8시)     │      │
│  │  ⬜ 마감 임박 알림           │      │
│  └──────────────────────────────┘      │
│                                         │
│  ┌──────────────────────────────┐      │ ThemeSettings
│  │  테마                        │      │
│  │  ◉ 라이트 모드              │      │
│  │  ○ 다크 모드                │      │
│  │  ○ 시스템 설정 따르기        │      │
│  └──────────────────────────────┘      │
│                                         │
│  ┌──────────────────────────────┐      │ AccountActions
│  │  [로그아웃]                  │      │
│  │  [계정 삭제]                 │      │
│  └──────────────────────────────┘      │
└─────────────────────────────────────────┘
```

---

## 🧩 공통 컴포넌트

### 1. GlassCard (Moonwave Style)
```typescript
interface GlassCardProps {
  variant?: 'default' | 'strong' | 'light';
  withWaveEffect?: boolean;
  hoverable?: boolean;
  className?: string;
  children: React.ReactNode;
}

// 스타일링
// default: bg-white/10 backdrop-blur-md border border-white/20
// strong: bg-white/20 backdrop-blur-lg border border-white/30
// light: bg-white/5 backdrop-blur-sm border border-white/10
```

### 2. TaskCard
```tsx
<Card className="hover:shadow-lg transition-shadow p-4">
  <div className="flex items-start gap-3">
    <Checkbox checked={task.status === 'completed'} />
    <div className="flex-1">
      <h3 className="font-semibold">{task.title}</h3>
      <p className="text-sm text-muted-foreground">{task.description}</p>
      <div className="mt-2 flex items-center gap-4 text-sm">
        <Badge>{task.category}</Badge>
        <span>{task.assigneeName}</span>
        {task.dueDate && <span>{formatDate(task.dueDate)}</span>}
      </div>
    </div>
  </div>
</Card>
```

### 3. QuickAddTask
```tsx
<div className="relative">
  <Input
    placeholder="할일을 빠르게 추가하세요..."
    value={quickTaskTitle}
    onChange={(e) => setQuickTaskTitle(e.target.value)}
    onKeyPress={(e) => e.key === 'Enter' && handleQuickAdd()}
    className="pr-20"
  />
  <div className="absolute right-2 top-1/2 -translate-y-1/2 flex gap-2">
    <Button size="sm" variant="ghost" onClick={handleQuickAdd}>
      추가
    </Button>
  </div>
</div>
```

---

## 🔄 상태 관리

### 전역 상태 (Firebase + Context)
```typescript
interface AppState {
  user: User | null;
  familyGroup: FamilyGroup | null;
  tasks: Task[];
  notifications: Notification[];
  isLoading: boolean;
  error: string | null;
}
```

### Firebase 실시간 구독 패턴
```typescript
// 할일 목록 실시간 구독
useEffect(() => {
  if (!user || !groupId) return;
  
  const tasksRef = collection(db, 'tasks');
  const q = query(
    tasksRef, 
    where('groupId', '==', groupId),
    orderBy('createdAt', 'desc')
  );
  
  const unsubscribe = onSnapshot(q, (snapshot) => {
    const tasks = snapshot.docs.map(doc => ({
      id: doc.id,
      ...doc.data()
    })) as Task[];
    setTasks(tasks);
  });
  
  return unsubscribe;
}, [user, groupId]);
```

---

## 📱 반응형 디자인

### 브레이크포인트
| 디바이스 | 너비 | 레이아웃 변경 |
|----------|------|---------------|
| 모바일 | ~640px | 단일 컬럼, 하단 네비게이션 |
| 태블릿 | 640px~ | 2컬럼 그리드, 사이드바 |
| 데스크톱 | 1024px~ | 3컬럼 그리드, 확장 뷰 |

### 모바일 최적화
- 스와이프 제스처로 할일 완료
- 하단 시트 UI 패턴
- 터치 타겟 최소 44px
- 고정 하단 네비게이션

---

## ⚡ 성능 최적화

### 1. 데이터 최적화
- Firebase 실시간 리스너 최소화
- 할일 목록 가상 스크롤링
- 이미지 lazy loading
- 오프라인 캐싱

### 2. 코드 최적화
```tsx
// 라우트별 코드 스플리팅
const TaskDetail = lazy(() => import('./pages/TaskDetail'));
const FamilyManage = lazy(() => import('./pages/FamilyManage'));
const Statistics = lazy(() => import('./pages/Statistics'));
```

---

## ♿ 접근성

### ARIA 속성
- 모든 인터랙티브 요소에 aria-label
- 동적 콘텐츠에 aria-live
- 포커스 관리 및 키보드 네비게이션

### 큰 글씨 모드
- 고령자를 위한 폰트 크기 조절
- 고대비 모드 지원

---

## 📱 PWA 설정

### manifest.json
```json
{
  "name": "Moonwave Plan",
  "short_name": "Plan",
  "description": "가족과 함께하는 할일 관리",
  "start_url": "/",
  "display": "standalone",
  "theme_color": "#9333ea",
  "background_color": "#ffffff",
  "icons": [
    {
      "src": "/icon-192.png",
      "sizes": "192x192",
      "type": "image/png"
    },
    {
      "src": "/icon-512.png",
      "sizes": "512x512",
      "type": "image/png"
    }
  ]
}
```

### Service Worker
- 오프라인 캐싱
- 백그라운드 동기화
- 푸시 알림 (FCM)

---

## 📌 버전 정보
- **문서 버전**: v1.0
- **작성일**: 2025-08-10
- **주요 변경**: 
  - Travel 서비스에서 To-Do List 서비스로 전환
  - 가족 협업 중심의 할일 관리 기능 정의
  - 실시간 동기화 및 알림 기능 추가
  - 통계 및 게임화 요소 포함
